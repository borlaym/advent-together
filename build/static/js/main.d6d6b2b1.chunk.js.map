{"version":3,"sources":["utils/getCurrentDay.ts","utils/api.ts","utils/userId.ts","components/CalendarDay/CalendarDay.tsx","components/UploadForm/DaySelector.tsx","components/UploadForm/ImageUploader.tsx","components/UploadForm/createPreloadPromise.ts","components/PresentListItem/PresentListItem.tsx","components/DataProvider/DataProvider.tsx","components/Modal/Modal.tsx","components/UploadForm/Button.tsx","components/UploadForm/UploadForm.tsx","utils/linkify.ts","components/Presentation/Presentation.tsx","components/CalendarPage/CalendarPage.tsx","components/Home/HangingItem.tsx","components/Home/hanging-christmas-tree-clipart.svg","components/Home/simple-christmas-bulb-clipart.svg","components/Home/Home.tsx","App.tsx","index.tsx"],"names":["enforceDayRegexResult","exec","window","location","search","enforceDay","Number","getCurrentDay","dayInDecember","Math","floor","Date","now","ROOT","getJson","path","fetch","mode","credentials","headers","String","then","response","json","catch","err","console","error","post","body","method","JSON","stringify","res","createAndGetUserId","calendarId","data","rawData","localStorage","getItem","parse","newId","uuid","setItem","DOOR_OPENING_DEGREES","Icon","styled","span","DayContainer","div","props","isOpen","dimensions","css","DayNumber","Door","openingDegree","doubleDoor","Inside","Present","colorValues","green","darkgreen","blue","darkblue","red","darkred","purple","yellow","beige","CalendarDay","dayNumber","isSelected","color","icon","onClick","handleClick","useCallback","canBeOpened","doorOpeningDegree","door","style","backgroundColor","id","Container","Day","PresentsIndicator","disabled","DaySelector","selectedDay","numberOfPresents","onChange","minPresents","reduce","acc","n","range","map","i","indicator","max","min","ceil","Array","fill","_","className","supportedMediaTypes","thumbnail","original","label","DeleteButton","ImageUploader","onImageAdded","onImageRemoved","image","isUnka","useState","isLoading","setIsLoading","stopPropagation","event","startUpload","e","target","files","length","file","item","value","fd","FormData","append","log","src","public_id","Promise","resolve","reject","img","Image","complete","addEventListener","Error","handleRemove","preventDefault","backgroundImage","type","display","accept","join","ListItem","li","Text","InlineButton","button","PresentListItem","present","onDelete","deleteItem","day","href","rel","alt","content","title","reducer","prevState","action","calendarData","presentsData","myPresents","presentToRemove","find","p","filter","initialState","StateContext","React","createContext","DispatchContext","StateWrapper","useReducer","state","dispatch","Provider","children","Background","Modal","Button","UploadModal","UploadWrapper","Title","h1","Textarea","textarea","Label","Nameinput","input","SubmitButton","ErrorDisplay","CloseButton","Row","ListHeader","h3","List","ul","UploadForm","defaultSelectedDay","onClose","useContext","setSelectedDay","getUserName","username","setUsername","setImage","userId","contentRef","useRef","setError","handleNameChange","handleDayChange","$uploaderArea","document","getElementById","scrollIntoView","behavior","handleSubmit","current","uuidV4","uploader","uploaderName","name","saveUserName","handleDelete","confirm","presentId","handleImageAdded","handleImageRemoved","resetError","useEffect","rows","ref","onInput","placeholder","htmlFor","sort","a","b","youtubeRegex","useLinkifyUrls","textContainerRef","text","innerHTML","inputText","replacedText","replacePattern1","replacePattern2","replacePattern3","replace","createElement","from","querySelectorAll","forEach","parsedUrl","URL","innerText","host","linkify","PresentModal","SlideShow","Slide","SlideInner","textOnly","TextWrap","shortText","Caption","ImageFill","Uploader","BgFiller","Upper","isFull","Lower","PagerWrapper","PagerButton","enabled","Presentation","presents","sliderRef","hasNextPage","setHasNextPage","hasPrevPage","setHasPrevPage","getCurrentIndex","width","offsetWidth","leftPos","scrollLeft","round","gotoIndex","index","childNodes","block","inline","gotoPrevPage","gotoNextPage","handleKeydown","keyCode","removeEventListener","scrollHandler","debounce","scrollWidth","leading","trailing","onScroll","youtubeId","results","parseYoutube","slideContent","YoutubeSlide","MediaSlide","TextSlide","height","frameBorder","allow","allowFullScreen","Wrapper","Description","section","CalendarPage","useParams","isUploadFormOpen","setIsUploadFormOpen","isPresentationOpen","setIsPresentationOpen","currentDay","closeUploadForm","openUploadForm","closePresentation","handleDayClick","clickedDayNumber","setTimeout","classList","add","remove","calendarName","description","to","HangingItem","inForeground","_extends","Object","assign","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","x1","x2","y2","d","_ref5","_ref6","_ref7","y1","gradientTransform","gradientUnits","offset","stopColor","_ref8","SvgHangingChristmasTreeClipart","_ref","svgRef","titleId","xmlns","xmlSpace","x","y","viewBox","ForwardRef","transform","SvgSimpleChristmasBulbClipart","BodyBackgroundOverride","createGlobalStyle","Page","TextContainer","Input","LandingPage","navigate","useNavigate","setName","showTitleForm","setShowTitleForm","createCalendar","calendar","enableUploadForm","left","animationDelay","App","element","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.d6d6b2b1.chunk.js","sourcesContent":["const enforceDayRegexResult = /forceday=([0-9]+)/.exec(window.location.search);\r\nexport const enforceDay = enforceDayRegexResult ? Number(enforceDayRegexResult[1]) : null;\r\n\r\n/**\r\n * Returns a number that is the day difference between now and 2021.12.01\r\n * Negative number means it's not december yet, positive means the day in december or after\r\n * Uses force parameter as well\r\n */\r\nexport function getCurrentDay(): number {\r\n  const dayInDecember = Math.floor((Date.now() - Number(new Date('2021/12/01'))) / (1000 * 60 * 60 * 24));\r\n  return enforceDay !== null ? enforceDay : dayInDecember;\r\n}\r\n","import { enforceDay } from \"./getCurrentDay\";\n\nconst ROOT = process.env.NODE_ENV === 'production' ? 'https://adventinaptar.herokuapp.com/api' : 'http://localhost:9000/api';\n\nexport default function getJson<T>(path: string): Promise<T> {\n  return fetch(ROOT + path, {\n    mode: 'cors',\n    credentials: 'omit',\n    headers: {\n      'x-force-day': String(enforceDay)\n    }\n  })\n    .then(response => response.json())\n    .catch(err => console.error(err));\n}\n\nexport function post<T>(path: string, body: any): Promise<T> {\n  return fetch(ROOT + path, {\n    method: 'POST',\n    body: JSON.stringify(body),\n    mode: 'cors',\n    credentials: 'omit',\n    headers: {\n      'Content-Type': 'application/json',\n      'x-force-day': String(enforceDay)\n    }\n  })\n  .then(res => res.json())\n}","import { v4 as uuid } from 'uuid';\n\nexport function createAndGetUserId(calendarId?: string): string | void {\n  if (!calendarId) {\n    return undefined;\n  }\n  const rawData = window.localStorage.getItem('userTokens');\n  let data;\n  try {\n    data = JSON.parse(rawData || '');\n  } catch (err) {\n    data = {};\n  }\n  if (data[calendarId]) {\n    return data[calendarId];\n  }\n  const newId = uuid();\n  data[calendarId] = newId;\n  window.localStorage.setItem('userTokens', JSON.stringify(data));\n  return newId;\n}\n\nexport function getUserName(calendarId: string): string | void {\n  const rawData = window.localStorage.getItem('userNames');\n  let data;\n  try {\n    data = JSON.parse(rawData || '');\n  } catch (err) {\n    data = {};\n  }\n  if (data[calendarId]) {\n    return data[calendarId];\n  }\n  return '';\n}\n\nexport function saveUserName(calendarId: string, name: string): string | void {\n  const rawData = window.localStorage.getItem('userNames');\n  let data;\n  try {\n    data = JSON.parse(rawData || '');\n  } catch (err) {\n    data = {};\n  }\n  data[calendarId] = name;\n  window.localStorage.setItem('userNames', JSON.stringify(data));\n}","import React, { useCallback } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { getCurrentDay } from \"../../utils/getCurrentDay\";\r\n\r\nexport const DOOR_ANIMATION_LENGTH = 800; // in ms\r\nconst DOOR_OPENING_DEGREES = { // in deg\r\n  open: 70,\r\n  closed: 0,\r\n  opened: 0,\r\n  unopenable: 35\r\n};\r\n\r\nconst Icon = styled.span`\r\n  font-family: Advent;\r\n  font-size: 140px;\r\n  text-shadow: 2px 2px 5px rgba(50 50 50 / 0.5);\r\n  @media screen and (max-width: 440px) {\r\n    font-size: 100px;\r\n  }\r\n  color: rgba(255 255 255 / 0.8);\r\n  user-select: none;\r\n`;\r\n\r\nconst DayContainer = styled.div<{\r\n  dimensions?: 'tall' | 'wide' | 'large';\r\n  isOpen: boolean;\r\n}>`\r\n  position: relative;\r\n  float: left;\r\n  width: var(--size);\r\n  height: var(--size);\r\n\r\n  margin-top: 0;\r\n  margin-left: 0;\r\n  margin-right: var(--margin);\r\n  margin-bottom: var(--margin);\r\n\r\n  box-sizing: border-box;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n\r\n  perspective: 30rem;\r\n\r\n  transform-style: preserve-3d;\r\n  z-index: ${props => props.isOpen ? 2 : 1};\r\n\r\n  background-color: rgba(200 200 200);\r\n\r\n  transition: transform 150ms ease-in-out;\r\n\r\n  box-shadow: 5px 5px 10px 0 rgba(50, 50, 50, 0.7);\r\n\r\n  ${props => props.dimensions === 'tall' && css`\r\n    height: calc(calc(var(--size) * 2) + var(--margin));\r\n\r\n    ${Icon} {\r\n      font-size: 200px;\r\n      @media screen and (max-width: 440px) {\r\n        font-size: 160px;\r\n      }\r\n    }\r\n  `}\r\n  ${props => props.dimensions === 'wide' && css`\r\n    width: calc(calc(var(--size) * 2) + var(--margin));\r\n  `}\r\n  ${props => props.dimensions === 'large' && css`\r\n    // overriding perspective, to make the opening nicer\r\n    perspective:60rem;\r\n    width: calc(calc(var(--size) * 2) + var(--margin));\r\n    height: calc(calc(var(--size) * 2) + var(--margin));\r\n\r\n    ${Icon} {\r\n      font-size: 260px;\r\n    }\r\n  `}\r\n`;\r\n\r\nconst DayNumber = styled.span`\r\n  position: absolute;\r\n  bottom: 0.5rem;\r\n  left: 1rem;\r\n  font-size: 20px;\r\n  color: rgba(255 255 255 / 0.9);\r\n  text-shadow: 2px 2px 5px rgba(50 50 50 / 0.5);\r\n`;\r\n\r\nconst Door = styled.div<{ openingDegree: number; doubleDoor?: 'left' | 'right' }>`\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n  padding-right: 0.5rem;\r\n\r\n  /* this makes things 3d */\r\n  transition: transform ${DOOR_ANIMATION_LENGTH}ms ease-in-out;\r\n  /* rotate rotates(!), translateZ fixes safari... */\r\n  transform: rotate3d(0, 1, 0, 0) translateZ(1px);\r\n  transform-origin: left 0; /* hogy a bal sarok nyiljon */\r\n  transform-style: preserve-3d;\r\n  z-index: 2;\r\n\r\n  ${props => props.openingDegree ? css`\r\n    transform: rotate3d(0, 1, 0, ${props.doubleDoor === 'right' ? props.openingDegree : props.openingDegree * -1}deg) translateZ(1px);\r\n  ` : ''}\r\n\r\n  ${props => props.doubleDoor ? css`\r\n    width: 50%;\r\n  ` : ''}\r\n\r\n  ${props => props.doubleDoor === 'right' && css`\r\n    left: 50%;\r\n    transform-origin: right 0;\r\n  `}\r\n`;\r\n\r\nconst Inside  = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transform-style: preserve-3d;\r\n  // transform: rotate(0deg) translateX(0) translateZ(1px);\r\n`;\r\n\r\nconst Present = styled.div<{ isOpen: boolean }>`\r\n  font-family: Advent;\r\n  font-size: 10em;\r\n  margin-left: 10px;\r\n  transition: transform 400ms linear 400ms;\r\n  z-index: 10;\r\n  transform-style: preserve-3d;\r\n\r\n  transform: rotate(0deg) translateX(0) translateZ(0);\r\n  ${props => props.isOpen && css`\r\n    transform: rotate(10deg) translateX(20%) translateZ(0);\r\n  `}\r\n`;\r\n\r\nconst colorValues = {\r\n  green: '#146B3A',\r\n  darkgreen: '#165B33',\r\n  blue: '#0f354f',\r\n  darkblue: '#0c142e',\r\n  red: '#EA4630',\r\n  darkred: '#BB2528',\r\n  purple: '#57000c',\r\n  yellow: '#F8B229',\r\n  beige: '#cc954a',\r\n};\r\n\r\ntype Props = {\r\n  dayNumber: number;\r\n  isSelected?: boolean;\r\n  dimensions?: 'tall' | 'wide' | 'large';\r\n  color: keyof typeof colorValues;\r\n  icon: string;\r\n  onClick: (dayNumber: number) => void;\r\n}\r\n\r\nexport default function CalendarDay({\r\n  dayNumber,\r\n  isSelected,\r\n  dimensions,\r\n  color,\r\n  icon,\r\n  onClick\r\n}: Props) {\r\n\r\n  const handleClick = useCallback(() => onClick(dayNumber), [dayNumber, onClick]);\r\n\r\n  const dayInDecember = getCurrentDay();\r\n  const canBeOpened = (dayInDecember >= dayNumber && dayInDecember > -1);\r\n\r\n  const doorOpeningDegree = (() => {\r\n    if (isSelected && canBeOpened) {\r\n      return DOOR_OPENING_DEGREES['open'];\r\n    } else if (!isSelected && canBeOpened) {\r\n      return DOOR_OPENING_DEGREES['opened'];\r\n    } else if (isSelected) {\r\n      return DOOR_OPENING_DEGREES['unopenable'];\r\n    }\r\n    return DOOR_OPENING_DEGREES['closed'];\r\n  })();\r\n\r\n  const door = dimensions === 'wide' ? (\r\n    <>\r\n      <Door\r\n        openingDegree={doorOpeningDegree}\r\n        doubleDoor=\"left\"\r\n        style={{\r\n          backgroundColor: colorValues[color]\r\n        }}\r\n      >\r\n        <DayNumber>{dayNumber + 1}</DayNumber>\r\n      </Door>\r\n      <Door\r\n        openingDegree={doorOpeningDegree}\r\n        doubleDoor=\"right\"\r\n        style={{\r\n          backgroundColor: colorValues[color]\r\n        }}\r\n      >\r\n        <Icon>{icon}</Icon>\r\n      </Door>\r\n    </>\r\n  ) : (\r\n    <Door\r\n      openingDegree={doorOpeningDegree}\r\n      style={{\r\n        backgroundColor: colorValues[color]\r\n      }}\r\n    >\r\n      <Icon>{icon}</Icon>\r\n      <DayNumber>{dayNumber + 1}</DayNumber>\r\n    </Door>\r\n  );\r\n\r\n  return (\r\n    <DayContainer\r\n      id={`day_${dayNumber}`}\r\n      dimensions={dimensions}\r\n      isOpen={isSelected}\r\n      onClick={handleClick}\r\n    >\r\n      {door}\r\n      <Inside>\r\n        <Present isOpen={isSelected}>{canBeOpened ? 'I' : 'R'}</Present>\r\n      </Inside>\r\n\r\n    </DayContainer>\r\n  )\r\n}\r\n","import styled, { css } from \"styled-components\"\r\nimport { getCurrentDay } from \"../../utils/getCurrentDay\";\r\n\r\ntype Props = {\r\n  selectedDay?: number;\r\n  numberOfPresents: number[];\r\n  onChange: (day: number) => void;\r\n}\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  align-items: flex-end;\r\n  justify-content: space-around;\r\n  max-width: 420px;\r\n  @media screen and (max-width: 440px) {\r\n    max-width: 270px;\r\n  }\r\n`;\r\n\r\nconst Day = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: flex-start;\r\n  justify-content: flex-end;\r\n  cursor: pointer;\r\n  width: 70px;\r\n  @media screen and (max-width: 440px) {\r\n    width: 45px;\r\n  }\r\n`;\r\n\r\nconst PresentsIndicator = styled.div<{ isSelected?: boolean; }>`\r\n  position: absolute;\r\n  top: 0;\r\n  right: 10px;\r\n  color: black;\r\n  font-size: 16px;\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  align-items: flex-start;\r\n  flex-direction: column;\r\n  width: 10px;\r\n\r\n  @media screen and (max-width: 440px) {\r\n    right: 5px;\r\n  }\r\n\r\n  .icon {\r\n    font-size: 20px;\r\n    line-height: 17px;\r\n    font-family: Advent;\r\n  }\r\n\r\n  ${props => props.isSelected && css`\r\n    color: rgba(250 250 250 / 0.9);\r\n  `}\r\n`;\r\n\r\nconst DayNumber = styled.div<{ isSelected?: boolean; disabled?: boolean }>`\r\n  position: relative;\r\n  font-size: 36px;\r\n  @media screen and (max-width: 440px) {\r\n    font-size: 30px;\r\n  }\r\n  color: rgba(0 0 0 / ${props => props.disabled ? '0.25' : '0.65'});\r\n  max-width: 35px;\r\n  margin-right: 25px;\r\n\r\n  @media screen and (max-width: 440px) {\r\n    margin-right: 15px;\r\n  }\r\n\r\n  ${props => props.isSelected && css`\r\n    color: rgba(250 250 250 / 0.9);\r\n    &:before {\r\n      display: block;\r\n      content: '';\r\n      position: absolute;\r\n      top: 0px;\r\n      bottom: 0px;\r\n      left: -15px;\r\n      right: -25px;\r\n      background-color: #F44336;\r\n      z-index: -1;\r\n      border-radius: 5px;\r\n\r\n      @media screen and (max-width: 440px) {\r\n        left: 0px;\r\n        right: -15px;\r\n      }\r\n    }\r\n  `}\r\n`;\r\n\r\nexport default function DaySelector({\r\n  selectedDay,\r\n  numberOfPresents,\r\n  onChange\r\n}: Props) {\r\n  const minPresents = numberOfPresents.reduce((acc, n) => {\r\n    if (n < acc) {\r\n      return n;\r\n    }\r\n    return acc;\r\n  }, numberOfPresents[0]);\r\n  const maxPresents = numberOfPresents.reduce((acc, n) => {\r\n    if (n > acc) {\r\n      return n;\r\n    }\r\n    return acc;\r\n  }, numberOfPresents[0]);\r\n  const range = maxPresents - minPresents;\r\n  return (\r\n    <Container>\r\n      {numberOfPresents.map((n, i) => {\r\n        const indicator = (range > 0) ? (() => {\r\n          if (n === 0) {\r\n            return 0;\r\n          }\r\n          return Math.max(Math.min(Math.ceil(((n - minPresents) / range) * 2), n), 1);\r\n        })() : (minPresents > 0 ? 1 : 0);\r\n        const disabled = i <= getCurrentDay();\r\n        return (\r\n          <Day key={i} onClick={() => disabled ? null : onChange(i)}>\r\n            <DayNumber disabled={disabled} isSelected={i === selectedDay}>{i + 1}</DayNumber>\r\n            <PresentsIndicator isSelected={i === selectedDay}>\r\n              {(new Array(indicator)).fill(true).map((_, i) => (\r\n                <span className=\"icon\" key={i}>h</span>\r\n              ))}\r\n            </PresentsIndicator>\r\n          </Day>\r\n        );\r\n      })}\r\n    </Container>\r\n  )\r\n}\r\n","import styled from \"styled-components\"\r\nimport React, { useCallback, useState } from \"react\";\r\nimport createImagePreloadPromise from \"./createPreloadPromise\";\r\n\r\nconst cloudName = 'adventcalendar';\r\nconst unsignedUploadPreset = 'ml_default';\r\nconst supportedMediaTypes = [\r\n  'image/gif',\r\n  'image/jpeg',\r\n  'image/png',\r\n  'image/svg+xml',\r\n  'image/webp'\r\n];\r\n\r\nexport const thumbnail = (id: string) => `https://res.cloudinary.com/adventcalendar/image/upload/w_200,h_200,c_fit/${id}.jpg`;\r\nexport const original = (id: string) => `https://res.cloudinary.com/adventcalendar/image/upload/${id}.jpg`;\r\n\r\nconst Container = styled.label`\r\n  width: 200px;\r\n  height: 200px;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border: 1px solid rgba(0, 0, 0, 0.3);\r\n  border-radius: 3px;\r\n  background-position: center center;\r\n  background-size: contain;\r\n  background-repeat: no-repeat;\r\n  background-color: #e0a452;\r\n  position: relative;\r\n  font-size: 1.2em;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst DeleteButton = styled.div`\r\n  position: absolute;\r\n  bottom: 0px;\r\n  right: 0px;\r\n  background: red;\r\n  color: white;\r\n  cursor: pointer;\r\n  padding: 2px;\r\n`\r\n\r\n\r\ntype Props = {\r\n  isUnka?: boolean;\r\n  image: string | null;\r\n  onImageAdded: (img: string) => void;\r\n  onImageRemoved: () => void;\r\n}\r\n\r\nexport default function ImageUploader({\r\n  onImageAdded,\r\n  onImageRemoved,\r\n  image,\r\n  isUnka\r\n}: Props) {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const stopPropagation = useCallback((event: React.MouseEvent<HTMLElement>) => {\r\n    event.stopPropagation();\r\n  }, []);\r\n\r\n  const startUpload = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files && e.target.files.length) {\r\n      setIsLoading(true);\r\n      const file = e.target.files.item(0);\r\n      if (!file) {\r\n        return; // Shouldn't happen\r\n      }\r\n      e.target.value = '';\r\n      const fd = new FormData();\r\n      fd.append('upload_preset', unsignedUploadPreset);\r\n      fd.append('tags', 'browser_upload'); // Optional - add tag for image admin in Cloudinary\r\n      fd.append('file', file);\r\n      fetch(`https://api.cloudinary.com/v1_1/${cloudName}/upload`, {\r\n        method: 'POST',\r\n        body: fd,\r\n        headers: {\r\n          'X-Requested-With': 'XMLHttpRequest'\r\n        }\r\n      })\r\n      .then(response => response.json())\r\n      .then(response => {\r\n        console.log(response);\r\n        return createImagePreloadPromise(thumbnail(response.public_id))\r\n          .then(() => {\r\n            onImageAdded(response.public_id);\r\n            setIsLoading(false);\r\n          });\r\n      })\r\n      .catch(err => {\r\n        setIsLoading(false);\r\n        console.error(err);\r\n      })\r\n    }\r\n  }, [onImageAdded]);\r\n\r\n  const handleRemove = useCallback((event: React.MouseEvent) => {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n    onImageRemoved();\r\n  }, [onImageRemoved]);\r\n\r\n  if (!image) {\r\n    return (\r\n      <Container onClick={stopPropagation}>\r\n        <input\r\n          type=\"file\"\r\n          style={{ display: \"none\" }}\r\n          onChange={startUpload}\r\n          accept={supportedMediaTypes.join(', ')}\r\n        />\r\n        {isLoading ? (isUnka ? 'Uploading...' : 'Töltés...') : (isUnka ? 'Upload an image' : 'Tölts fel egy képet!')}\r\n      </Container>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Container\r\n      onClick={stopPropagation}\r\n      style={{\r\n        backgroundImage: `url('${thumbnail(image)}')`\r\n      }}\r\n    >\r\n      <DeleteButton onClick={handleRemove}>{isUnka ? 'Remove' : 'Törlés'}</DeleteButton>\r\n    </Container>\r\n  )\r\n}","/**\n * Promisify preloading an image. Resolve when the image is preloaded\n */\n export default function createImagePreloadPromise(src: string | null) {\n  return new Promise<void>((resolve, reject) => {\n    if (!src) {\n      return resolve();\n    }\n    const img = new Image();\n    img.src = src;\n    if (img.complete) {\n      resolve();\n    } else {\n      const handleLoad = () => resolve();\n      img.addEventListener('load', handleLoad);\n\n      const handleError = () => reject(new Error('Image loading falied'));\n      img.addEventListener('error', handleError);\n    }\n  });\n}","import styled from 'styled-components';\r\nimport { useCallback } from \"react\";\r\nimport { Present } from \"../../types\";\r\nimport { original, thumbnail } from '../UploadForm/ImageUploader';\r\nimport { getCurrentDay } from '../../utils/getCurrentDay';\r\n\r\nconst ListItem = styled.li`\r\n  margin: 0.3em;\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  a {\r\n    display: flex;\r\n  }\r\n\r\n  img {\r\n    max-height: 20px;\r\n    max-width: 20px;\r\n    display: inline-block;\r\n    margin: 0 3px;\r\n  }\r\n\r\n  ::before {\r\n    display: inline-block;\r\n    font-family: Advent;\r\n    content: 'h';\r\n    margin-right: 3px;\r\n  }\r\n`;\r\n\r\nconst Text = styled.span`\r\n  margin-left: 5px;\r\n  @media screen and (max-width: 440px) {\r\n    font-size: 0.9em;\r\n  }\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Date = styled.span`\r\n  white-space: nowrap;\r\n  font-weight: bold;\r\n  font-size: 0.9em;\r\n`;\r\n\r\nexport const InlineButton = styled.button`\r\n  display: inline-block;\r\n  margin: 0 0 0 10px;\r\n  outline: none;\r\n  border: none;\r\n  border-radius: 3px;\r\n  padding: 0.2em 0.3em;\r\n  cursor: pointer;\r\n\r\n  font-family: inherit;\r\n  box-shadow: 2px 2px 17px 0px #0000005c;\r\n  background-color: #F44336;\r\n  color: #fff;\r\n`;\r\n\r\nexport default function PresentListItem({\r\n  present,\r\n  onDelete\r\n}: {\r\n  present: Present;\r\n  onDelete: (present: Present) => void;\r\n}) {\r\n\r\n  const deleteItem = useCallback(() => onDelete(present), [onDelete, present])\r\n\r\n  return (\r\n    <ListItem>\r\n      <Date>Dec. {present.day + 1}:</Date> {present.image && (\r\n        <a href={original(present.image)} target=\"_blank\" rel=\"noreferrer\">\r\n          <img src={thumbnail(present.image)} alt={present.content} />\r\n        </a>\r\n      )} <Text title={present.content}>{present.content}</Text> {present.day > getCurrentDay() && <InlineButton onClick={deleteItem}>✖</InlineButton>}\r\n    </ListItem>\r\n  )\r\n}\r\n","import React, { Dispatch, useReducer } from \"react\";\nimport { Present } from \"../../types\";\n\nexport type CalendarData = {\n  presents: Present[];\n  numberOfPresents: number[];\n  calendarName: string;\n}\n\ntype State = {\n  calendarData: CalendarData | null;\n  myPresents: Present[];\n}\n\nexport type Action = {\n  type: 'SET_PRESENTS_DATA';\n  presentsData: CalendarData | null;\n} | {\n  type: 'SET_MYPRESENTS';\n  myPresents: Present[];\n} | {\n  type: 'ADD_PRESENT';\n  present: Present;\n} | {\n  type: 'DELETE_PRESENT';\n  uuid: string;\n}\n\nfunction reducer(prevState: State, action: Action): State {\n  switch (action.type) {\n    case 'SET_PRESENTS_DATA':\n      return {\n        ...prevState,\n        calendarData: action.presentsData\n      };\n    case 'SET_MYPRESENTS':\n      return {\n        ...prevState,\n        myPresents: action.myPresents\n      };\n    case 'ADD_PRESENT':\n      return {\n        calendarData: {\n          ...prevState.calendarData,\n          numberOfPresents: prevState.calendarData?.numberOfPresents.map((n, i) => i === action.present.day ? n + 1 : n),\n        },\n        myPresents: [...prevState.myPresents, action.present]\n      };\n    case 'DELETE_PRESENT': {\n      const presentToRemove = prevState.myPresents.find(p => p.uuid === action.uuid);\n      if (!presentToRemove) {\n        return prevState;\n      }\n      return {\n        calendarData: {\n          ...prevState.calendarData,\n          numberOfPresents: prevState.calendarData?.numberOfPresents.map((n, i) => i === presentToRemove.day ? n - 1 : n),\n        },\n        myPresents: prevState.myPresents.filter(p => p.uuid !== action.uuid)\n      }\n    }\n  }\n}\n\nconst initialState: State = {\n  calendarData: null,\n  myPresents: []\n}\n\nexport const StateContext = React.createContext<State>(initialState);\n\nexport const DispatchContext = React.createContext<Dispatch<Action>>(() => null);\n\ntype Props = {\n  children: React.ReactNode;\n}\n\nexport default function StateWrapper(props: Props): React.ReactElement {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  return (\n    <StateContext.Provider value={state}>\n      <DispatchContext.Provider value={dispatch}>\n        {props.children}\n      </DispatchContext.Provider>\n    </StateContext.Provider>\n  );\n}","import styled from \"styled-components\";\r\n\r\nexport const Background = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(255,255,255,0.7);\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 10;\r\n\r\n  // this makes it appear above the opening doors (where perspective is set to 30em/60em)\r\n  transform: translateZ(61em);\r\n\r\n  // appearing animation\r\n  @keyframes fadein {\r\n    from { opacity: 0; }\r\n    to { opacity: 1; }\r\n  }\r\n  animation: 100ms linear fadein;\r\n`;\r\n\r\nexport const Modal = styled.div`\r\n  position: relative;\r\n  width: 90%;\r\n  max-width: 700px;\r\n  min-height: 300px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  margin: 2em;\r\n  z-index: 10;\r\n\r\n  // appearing animation\r\n  @keyframes slidein {\r\n    from { transform: scale(0); }\r\n    to { transform: scale(1); }\r\n  }\r\n  animation: 300ms ease-in-out slidein;\r\n`;\r\n","import styled from 'styled-components';\r\n\r\nexport const Button = styled.button`\r\n  display: block;\r\n  margin: 2em auto;\r\n  outline: none;\r\n  border: none;\r\n  border-radius: 1em;\r\n  padding: 1rem;\r\n\r\n  font-family: inherit;\r\n  font-size: 1.5rem;\r\n  text-shadow: 1px 1px 2px rgba(50 50 50 / 0.5);\r\n  box-shadow: 2px 2px 17px 0px #0000005c;\r\n  background-color: rgba(204, 149, 74, 0.9);\r\n  color: #fff;\r\n\r\n  transition: transform 100ms linear, background-color 100ms linear;\r\n\r\n  :hover {\r\n    background-color: rgba(204, 149, 74, 1);\r\n    transform: scale(1.05);\r\n  }\r\n`;\r\n","import React, { useCallback, useContext, useEffect, useRef, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { createAndGetUserId, getUserName, saveUserName } from \"../../utils/userId\";\r\nimport DaySelector from \"./DaySelector\";\r\nimport PresentListItem from \"../PresentListItem/PresentListItem\";\r\nimport { Present } from \"../../types\";\r\nimport { v4 as uuidV4 } from 'uuid';\r\nimport { post } from \"../../utils/api\";\r\nimport { DispatchContext, StateContext } from \"../DataProvider/DataProvider\";\r\nimport { Background, Modal } from \"../Modal/Modal\";\r\nimport ImageUploader from \"./ImageUploader\";\r\nimport { Button } from './Button';\r\nimport { getCurrentDay } from \"../../utils/getCurrentDay\";\r\n\r\nconst UploadModal = styled(Modal)`\r\n  background-color: #cc954a;\r\n  border-radius: 10px;\r\n  box-shadow: 5px 5px 10px 0 rgba(50, 50, 50, 0.7);\r\n`;\r\n\r\nconst UploadWrapper = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 2em;\r\n  box-sizing: border-box;\r\n  overflow-y: scroll;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n\r\n  color: rgba(10 10 10 / 0.75);\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  font-family: 'Great Vibes', cursive;\r\n  font-size: 5em;\r\n  color: rgba(250 250 250 / 0.9);\r\n  text-shadow: 2px 3px 5px rgba(50 50 50 / 0.6);\r\n  margin: 2rem 0 1rem;\r\n  padding: 0;\r\n  width: 100%;\r\n  text-align: center;\r\n\r\n  @media screen and (max-width: 440px) {\r\n    margin: 0.5rem 0;\r\n    font-size: 2.5em;\r\n  }\r\n`;\r\n\r\nconst Text = styled.p`\r\n  color: #f7f7f7e8;\r\n  font-size: 1.2em;\r\n  line-height: 1.5em;\r\n  @media screen and (max-width: 440px) {\r\n    font-size: 1.2em;\r\n    line-height: 1.65em;\r\n  }\r\n\r\n  text-align: center;\r\n  text-shadow: 2px 2px 5px rgba(50 50 50 / 0.5);\r\n  width: 90%;\r\n`;\r\n\r\nconst Textarea = styled.textarea`\r\n  width: 200px;\r\n  height: 200px;\r\n  font-family: inherit;\r\n  font-size: 1.2em;\r\n  padding: 0.5em;\r\n  box-sizing: border-box;\r\n\r\n  border: 1px solid rgba(0, 0, 0, 0.3);\r\n  border-radius: 3px;\r\n  background-color: #e0a452;\r\n\r\n  &::placeholder {\r\n    color: rgba(10 10 10 / 0.75);\r\n    text-align: center;\r\n    padding-top: calc(50% - 10px);\r\n  }\r\n\r\n  &:active, &:focus {\r\n    &::placeholder {\r\n      color: transparent;\r\n    }\r\n  }\r\n`;\r\n\r\nconst Label = styled.label`\r\n  font-size: 1.2em;\r\n  @media screen and (max-width: 440px) {\r\n    font-size: 1.1em;\r\n  }\r\n`;\r\n\r\nconst Nameinput = styled.input`\r\n  width: 200px;\r\n  font-family: inherit;\r\n  font-size: 1.2em;\r\n  padding: 0.5em;\r\n  box-sizing: border-box;\r\n  margin: 0.5em 0 1em 0;\r\n  border: 1px solid rgba(0, 0, 0, 0.3);\r\n  border-radius: 3px;\r\n  background-color: #e0a452;\r\n  text-align: center;\r\n\r\n  &::placeholder {\r\n    color: rgba(10 10 10 / 0.3);\r\n    text-align: center;\r\n  }\r\n\r\n  &:active, &:focus {\r\n    &::placeholder {\r\n      color: transparent;\r\n    }\r\n  }\r\n`;\r\n\r\nconst SubmitButton = styled(Button)`\r\n  margin: 0.5em;\r\n  background-color: hsl(145deg 61% 30%);\r\n  :hover {\r\n    background-color: hsl(145deg 61% 35%);\r\n  }\r\n`;\r\n\r\nconst ErrorDisplay = styled.p`\r\n  color: red;\r\n`;\r\n\r\nconst CloseButton = styled.div`\r\n  position: absolute;\r\n  right: 1em;\r\n  top: 1em;\r\n  padding: 1em;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst Row = styled.div`\r\n  display: flex;\r\n  align-items: flex-start;\r\n  justify-content: space-around;\r\n  flex-wrap: wrap;\r\n  margin: 1em 0;\r\n  > * {\r\n    margin: 0.5em 1em;\r\n  }\r\n`;\r\n\r\nconst ListHeader = styled.h3`\r\n  margin: 1.5em 0 0.5em;\r\n  padding: 0;\r\n  font-size: 1.3em;\r\n`;\r\n\r\nconst List = styled.ul`\r\n  width: 80%;\r\n  @media screen and (max-width: 440px) {\r\n    width: 100%;\r\n  }\r\n  margin: 0 auto;\r\n  padding-left: 0;\r\n  list-style-type: '⭐️';\r\n`;\r\n\r\ntype Props = {\r\n  calendarId: string;\r\n  defaultSelectedDay: number | null;\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function UploadForm({\r\n  calendarId,\r\n  defaultSelectedDay,\r\n  onClose\r\n}: Props) {\r\n  const { calendarData, myPresents } = useContext(StateContext);\r\n  const dispatch = useContext(DispatchContext);\r\n  const numberOfPresents = calendarData.numberOfPresents;\r\n  const [selectedDay, setSelectedDay] = useState(defaultSelectedDay);\r\n  const [username, setUsername] = useState(getUserName(calendarId) || '');\r\n  const [image, setImage] = useState<string | null>(null);\r\n  const userId = createAndGetUserId(calendarId);\r\n  const contentRef = useRef(null);\r\n  const [error, setError] = useState('');\r\n  const isUnka = calendarId === 'a3f731b4-7047-42ef-a1ff-a57192ff186a';\r\n\r\n  const handleNameChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => setUsername(event.target.value), []);\r\n  const handleDayChange = useCallback((day: number) => {\r\n    setSelectedDay(day);\r\n    const $uploaderArea = document.getElementById('uploaderArea');\r\n    if ($uploaderArea) {\r\n      $uploaderArea.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n    setError('');\r\n  }, []);\r\n\r\n  const handleSubmit = useCallback(() => {\r\n    const content = contentRef.current?.value;\r\n    if (!content && !image) {\r\n      return setError(isUnka ? 'Add an image or some text!' : 'Adj meg vagy egy képet vagy egy üzenetet!');\r\n    }\r\n    if (content.length > 2000) {\r\n      return setError(isUnka ? 'Maximum size of message is 2000 characters!' : 'Az üzenet maximális hossza 2000 karakter!');\r\n    }\r\n    if (username?.length > 100) {\r\n      return setError(isUnka ? 'Name can\\'t be longer than 100 characters' : 'A felhasználónév nem lehet hosszabb, mint 100 karakter!');\r\n    }\r\n    if (selectedDay === null) {\r\n      return setError(isUnka ? 'Choose a day!' : 'Válassz ki egy napot!');\r\n    }\r\n    if (selectedDay <= getCurrentDay()) {\r\n      return setError(isUnka ? 'You can only upload to later days' : 'Csak december későbbi napjaira tudsz feltölteni!');\r\n    }\r\n    const present: Present = {\r\n      uuid: uuidV4(),\r\n      day: selectedDay,\r\n      uploader: userId || '',\r\n      uploaderName: username,\r\n      content,\r\n      image\r\n    };\r\n    post('/calendar/' + calendarId, present);\r\n    saveUserName(calendarId, username);\r\n    contentRef.current.value = '';\r\n    setImage(null);\r\n    dispatch({\r\n      type: 'ADD_PRESENT',\r\n      present\r\n    });\r\n  }, [calendarId, dispatch, image, selectedDay, userId, username]);\r\n\r\n  const handleDelete = useCallback((present: Present) => {\r\n    if (!window.confirm('Are you sure you want to delete this present?')) {\r\n      return;\r\n    }\r\n    post('/calendar/' + calendarId + '/remove', {\r\n      presentId: present.uuid,\r\n      userId\r\n    });\r\n    dispatch({\r\n      type: 'DELETE_PRESENT',\r\n      uuid: present.uuid\r\n    });\r\n  }, [calendarId, dispatch, userId]);\r\n\r\n  const handleImageAdded = useCallback((image: string) => setImage(image), []);\r\n  const handleImageRemoved = useCallback(() => setImage(null), []);\r\n\r\n  const resetError = useCallback(() => setError(''), []);\r\n\r\n  useEffect(function resetError() {\r\n    setError('');\r\n  }, [username, selectedDay, image]);\r\n\r\n  return (\r\n    <Background onClick={onClose}>\r\n      <UploadModal onClick={(e: React.MouseEvent) => e.stopPropagation()}>\r\n        <UploadWrapper>\r\n          <CloseButton onClick={onClose}>x</CloseButton>\r\n          <Title>{isUnka ? 'Sharing is caring!' : 'Ajándékozni jó!'}</Title>\r\n          {isUnka ? (\r\n            <Text>\r\n              Upload an image, a short text, or even a YouTube url for the selected day! <br />\r\n              On that day everyone who knows the calendar's URL will see your present.\r\n            </Text>\r\n          ) : (\r\n            <Text>\r\n              Tölts fel egy képet, rövid szöveget, vagy akár egy Youtube linket a kiválasztott napra!<br />\r\n              Azon a napon mindenki, aki rendelkezik a naptár URL-jével, látni fogja a feltöltésed.\r\n            </Text>\r\n          )}\r\n\r\n          <DaySelector\r\n            selectedDay={selectedDay}\r\n            numberOfPresents={numberOfPresents}\r\n            onChange={handleDayChange}\r\n          />\r\n\r\n          <Row id=\"uploaderArea\">\r\n            <ImageUploader\r\n              onImageAdded={handleImageAdded}\r\n              onImageRemoved={handleImageRemoved}\r\n              image={image}\r\n              isUnka={isUnka}\r\n            />\r\n            <div>\r\n              <Textarea rows={5} ref={contentRef} onInput={resetError} placeholder={isUnka ? 'Write a message!' : \"Írj üzenetet!\"}></Textarea>\r\n            </div>\r\n          </Row>\r\n\r\n          <Label htmlFor=\"usernameField\">{isUnka ? 'You can optionally enter your name' : 'És ha szeretnéd a neved is megadhatod'}</Label>\r\n          <Nameinput id=\"usernameField\" type=\"text\" value={username} placeholder={isUnka ? 'anonymous' : \"névtelen ajándékozó\"} onChange={handleNameChange} />\r\n\r\n          <SubmitButton onClick={handleSubmit}>{isUnka ? 'Send' : 'Mehet'}</SubmitButton>\r\n          {error && (\r\n            <ErrorDisplay>\r\n              {error}\r\n            </ErrorDisplay>\r\n          )}\r\n          {myPresents.length > 0 && (\r\n            <>\r\n              <ListHeader>{isUnka ? 'Your previous uploads from this device:' : 'Erről az eszközről korábban feltöltött ajándékaid:'}</ListHeader>\r\n              <List>\r\n                {myPresents.sort((a, b) => a.day - b.day).map(present => (\r\n                  <PresentListItem key={present.uuid} present={present} onDelete={() => handleDelete(present)} />\r\n                ))}\r\n              </List>\r\n            </>\r\n          )}\r\n        </UploadWrapper>\r\n      </UploadModal>\r\n    </Background>\r\n  )\r\n}\r\n","import { useEffect, useRef } from \"react\";\r\n\r\nconst youtubeRegex = /^http(?:s?):\\/\\/(?:www\\.)?youtu(?:be\\.com\\/watch\\?v=|\\.be\\/)([\\w\\-\\_]*)(&(amp;)?‌​[\\w\\?‌​=]*)?$/;\r\nexport function parseYoutube(inputText: string): string | null {\r\n  const results = youtubeRegex.exec(inputText);\r\n  if (results) {\r\n    return results[1];\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction linkify(inputText: string): string {\r\n  var replacedText, replacePattern1, replacePattern2, replacePattern3;\r\n\r\n  //URLs starting with http://, https://, or ftp://\r\n  replacePattern1 = /(\\b(https?|ftp):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gim;\r\n  replacedText = inputText.replace(replacePattern1, '<a href=\"$1\" target=\"_blank\">$1</a>');\r\n\r\n  //URLs starting with \"www.\" (without // before it, or it'd re-link the ones done above).\r\n  replacePattern2 = /(^|[^\\/])(www\\.[\\S]+(\\b|$))/gim;\r\n  replacedText = replacedText.replace(replacePattern2, '$1<a href=\"http://$2\" target=\"_blank\">$2</a>');\r\n\r\n  //Change email addresses to mailto:: links.\r\n  replacePattern3 = /(([a-zA-Z0-9\\-\\_\\.])+@[a-zA-Z\\_]+?(\\.[a-zA-Z]{2,6})+)/gim;\r\n  replacedText = replacedText.replace(replacePattern3, '<a href=\"mailto:$1\">$1</a>');\r\n\r\n  const div = document.createElement('div');\r\n  div.innerHTML = replacedText;\r\n  Array.from(div.querySelectorAll('a')).forEach(a => {\r\n    try {\r\n      const parsedUrl = new URL(a.href);\r\n      a.innerText = `[${parsedUrl.host}]`;\r\n    } catch (err) {\r\n      console.error(a.href)\r\n      console.error(err);\r\n    }\r\n  });\r\n\r\n  return div.innerHTML;\r\n}\r\n\r\nexport default function useLinkifyUrls() {\r\n  const textContainerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (textContainerRef.current) {\r\n      const text = textContainerRef.current.innerHTML;\r\n      textContainerRef.current.innerHTML = linkify(text);\r\n    }\r\n  }, []);\r\n\r\n  return textContainerRef;\r\n}","import React, { useContext, useCallback, useState, useRef, useEffect } from \"react\"\r\nimport styled, { css } from \"styled-components\";\r\nimport debounce from 'lodash/debounce';\r\nimport useLinkifyUrls, { parseYoutube } from \"../../utils/linkify\";\r\nimport { StateContext } from \"../DataProvider/DataProvider\";\r\nimport { Background, Modal } from \"../Modal/Modal\"\r\nimport { original } from '../UploadForm/ImageUploader';\r\n\r\n\r\ntype Props = {\r\n  dayNumber: number;\r\n  onClose: () => void;\r\n}\r\n\r\nconst BGFILLER_ENABLED = true;\r\n\r\nconst PresentModal = styled(Modal)`\r\n  background-color: white;\r\n  border-radius: 10px;\r\n  box-shadow: 5px 5px 10px 0 rgba(50, 50, 50, 0.7);\r\n  min-width: 95%;\r\n  min-height: 95%;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst SlideShow = styled.div`\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  overflow-x: scroll;\r\n  flex-grow: 1;\r\n  width: 100%;\r\n  height: 100%;\r\n  scroll-snap-type: x mandatory;\r\n`\r\n\r\nconst Slide = styled.div`\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-shrink: 0;\r\n  scroll-snap-align: center;\r\n  scroll-snap-stop: always;\r\n`;\r\n\r\nconst SlideInner = styled.div<{ textOnly: boolean }>`\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  overflow-y: scroll;\r\n\r\n  // hide scrollbars\r\n  -ms-overflow-style: none;\r\n  scrollbar-width: none;\r\n  &::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n  text-align: center;\r\n\r\n  ${props => props.textOnly && css`\r\n    text-align: left;\r\n    padding: 2em 4em;\r\n    @media screen and (max-width: 440px) {\r\n      padding: 1.5em;\r\n    }\r\n  `}\r\n`;\r\n\r\nconst Text = styled.p`\r\n  color: rgb(0 0 0 / 70%);\r\n  line-height: 1.6em;\r\n  font-style: italic;\r\n  overflow-wrap: break-word;\r\n  max-width: 80%;\r\n  @media screen and (max-width: 440px) {\r\n    max-width: 100%;\r\n  }\r\n`;\r\n\r\nconst TextWrap = styled.div<{ shortText: boolean }>`\r\n  display: flex;\r\n  min-height: 100%;\r\n  width: 100%;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  padding: 2em 0;\r\n  box-sizing: border-box;\r\n\r\n  font-size: 1.5em;\r\n  @media screen and (max-width: 440px) {\r\n    font-size: 1.2em;\r\n  }\r\n\r\n  ${props => props.shortText && css`\r\n    justify-content: center;\r\n    font-size: 2em;\r\n    @media screen and (max-width: 440px) {\r\n      font-size: 1.5em;\r\n    }\r\n\r\n    & ${Text} {\r\n      text-align: center;\r\n      max-width: 60%;\r\n      @media screen and (max-width: 440px) {\r\n        max-width: 100%;\r\n      }\r\n    }\r\n  `}\r\n`;\r\n\r\n\r\nconst Caption = styled.div`\r\n  font-size: 1.5em;\r\n  display: inline-block;\r\n  margin: 1em auto 1em;\r\n  width: 60%;\r\n  @media screen and (max-width: 440px) {\r\n    width: 90%;\r\n  }\r\n  text-align: left;\r\n  color: rgb(0 0 0 / 70%);\r\n  line-height: 1.6em;\r\n  font-style: italic;\r\n  overflow-wrap: break-word;\r\n`;\r\n\r\nconst ImageFill = styled.img`\r\n  display: block;\r\n  max-width: 95%;\r\n  max-height: 95%;\r\n  width: auto;\r\n  height: auto;\r\n  border: 2px solid white;\r\n`;\r\n\r\nconst Uploader = styled.div`\r\n  font-family: cursive;\r\n  font-size: 0.9em;\r\n  text-align: right;\r\n  width: 60%;\r\n  @media screen and (max-width: 440px) {\r\n    max-width: 100%;\r\n  }\r\n`;\r\n\r\nconst BgFiller = styled.div<{ src: string }>`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  content: '';\r\n  background-image: url(${props => props.src});\r\n  background-size: cover;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  z-index: -1;\r\n  filter: blur(10px) brightness(1.5);\r\n`;\r\n\r\nconst Upper = styled.div<{ isFull?: boolean }>`\r\n  height: ${props => props.isFull ? '100%' : '80%'};\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n`\r\n\r\nconst Lower = styled.div`\r\n  height: 20%;\r\n`\r\n\r\nconst PagerWrapper = styled.div`\r\n  // at the bottom of modal\r\n  position: absolute;\r\n  bottom: 0px;\r\n  right: 0;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  // with some spacing left form the edges\r\n  padding: 0 1em;\r\n  @media screen and (max-width: 440px) {\r\n    padding: 0 0.2em;\r\n  }\r\n  // aligned with the buttons at the edges\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  // above everything\r\n  z-index: 1;\r\n`;\r\n\r\nconst PagerButton = styled.a<{ enabled: boolean }>`\r\n  color: #479e6b;\r\n  text-shadow: 1px 3px 1px #62626261;\r\n  font-size: 10em;\r\n  cursor: pointer;\r\n  @media screen and (max-width: 440px) {\r\n    font-size: 5em;\r\n  }\r\n  transition: opacity 250ms ease-in;\r\n  opacity: ${props => props.enabled ? 1 : 0};\r\n`;\r\n\r\nconst CloseButton = styled.a`\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  padding: 0.5em;\r\n  z-index: 1;\r\n  cursor: pointer;\r\n  color: #ff434380;\r\n  // text-shadow: 1px 3px 1px #62626261;\r\n  font-size: 1.5em;\r\n`;\r\n\r\nexport default function Presentation({\r\n  dayNumber,\r\n  onClose\r\n}: Props) {\r\n  const { calendarData } = useContext(StateContext);\r\n  const presents = calendarData.presents.filter(p => p.day === dayNumber);\r\n\r\n  // paging related\r\n  const sliderRef = useRef<HTMLDivElement | null>(null);\r\n  const [hasNextPage, setHasNextPage] = useState(presents.length > 1);\r\n  const [hasPrevPage, setHasPrevPage] = useState(false);\r\n\r\n  function getCurrentIndex() {\r\n    if (!sliderRef.current) {\r\n      return 0;\r\n    }\r\n    const width = sliderRef.current.offsetWidth;\r\n    const leftPos = sliderRef.current.scrollLeft;\r\n    return Math.round(leftPos / width);\r\n  }\r\n\r\n  function gotoIndex(index) {\r\n    if (!sliderRef.current.childNodes[index]) {\r\n      return;\r\n    }\r\n    sliderRef.current.childNodes[index].scrollIntoView({\r\n      behavior: 'smooth',\r\n      block: 'center',\r\n      inline: 'center'\r\n    });\r\n  }\r\n\r\n  const gotoPrevPage = useCallback(() => {\r\n    gotoIndex(getCurrentIndex() - 1);\r\n  }, []);\r\n\r\n  const gotoNextPage = useCallback(() => {\r\n    gotoIndex(getCurrentIndex() + 1);\r\n  }, []);\r\n\r\n  const handleKeydown = useCallback((event: KeyboardEvent) => {\r\n    if (event.keyCode === 37) {\r\n      gotoPrevPage();\r\n    }\r\n    if (event.keyCode === 39) {\r\n      gotoNextPage();\r\n    }\r\n\r\n  }, [gotoNextPage, gotoPrevPage]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('keydown', handleKeydown);\r\n    return () => {\r\n      document.removeEventListener('keydown', handleKeydown);\r\n    }\r\n  }, [])\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  const scrollHandler = useCallback(debounce(function scrollPosChecker() {\r\n    if (!sliderRef.current) {\r\n      return;\r\n    }\r\n    const width = sliderRef.current.offsetWidth;\r\n    const scrollWidth = sliderRef.current.scrollWidth;\r\n    const leftPos = sliderRef.current.scrollLeft;\r\n\r\n    setHasPrevPage(leftPos > 0);\r\n    setHasNextPage((leftPos + width) < (scrollWidth - 50));\r\n  }, 30, { leading: false, trailing: true }), []);\r\n\r\n  return (\r\n    <Background onClick={onClose}>\r\n      <PresentModal onClick={(e: React.MouseEvent) => e.stopPropagation()}>\r\n\r\n        <PagerWrapper>\r\n          <PagerButton onClick={gotoPrevPage} enabled={hasPrevPage}>‹</PagerButton>\r\n          <PagerButton onClick={gotoNextPage} enabled={hasNextPage}>›</PagerButton>\r\n        </PagerWrapper>\r\n\r\n        <CloseButton onClick={onClose}>✖</CloseButton>\r\n\r\n        <SlideShow ref={sliderRef} onScroll={scrollHandler}>\r\n          {presents.map((present, i) => {\r\n            const youtubeId = parseYoutube(present.content);\r\n\r\n            const slideContent = (() => {\r\n              if (youtubeId) {\r\n                return <YoutubeSlide id={youtubeId} present={present} />;\r\n              }\r\n              if (present.image) {\r\n                return <MediaSlide present={present} />;\r\n              }\r\n              return <TextSlide present={present} />\r\n            })();\r\n\r\n            return (\r\n              <Slide key={present.uuid}>\r\n                {slideContent}\r\n              </Slide>\r\n            );\r\n          })}\r\n          {presents.length === 0 && (\r\n            <SlideInner textOnly={true}>\r\n              <Text>A mai napra senki nem töltött föl semmit :(</Text>\r\n            </SlideInner>\r\n          )}\r\n        </SlideShow>\r\n      </PresentModal>\r\n    </Background>\r\n  )\r\n}\r\n\r\nconst MediaSlide = ({present}) => {\r\n  const textContainerRef = useLinkifyUrls();\r\n  return (\r\n    <>\r\n      <SlideInner textOnly={false}>\r\n        <Upper isFull={!present.content && !present.uploaderName}>\r\n          {BGFILLER_ENABLED && <BgFiller src={original(present.image)} />}\r\n          <ImageFill src={original(present.image)} />\r\n        </Upper>\r\n\r\n        {(present.content || present.uploaderName) && (\r\n          <Lower>\r\n              <Caption ref={textContainerRef}>\r\n                {present.content}\r\n                <Uploader>{present.uploaderName ? `- ${present.uploaderName}` : null}</Uploader>\r\n              </Caption>\r\n          </Lower>\r\n        )}\r\n\r\n      </SlideInner>\r\n    </>\r\n  );\r\n}\r\n\r\nconst TextSlide = ({present}) => {\r\n  const textContainerRef = useLinkifyUrls();\r\n  return (\r\n    <>\r\n      <SlideInner textOnly={true}>\r\n        <TextWrap shortText={present.content.length < 300}>\r\n          <Text ref={textContainerRef}>{present.content}</Text>\r\n          <Uploader>{present.uploaderName ? `- ${present.uploaderName}` : null}</Uploader>\r\n        </TextWrap>\r\n      </SlideInner>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction YoutubeSlide({ id, present }) {\r\n  return (\r\n    <SlideInner textOnly={false}>\r\n      <Upper isFull={!present.uploaderName}>\r\n        <iframe\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n          src={`https://www.youtube.com/embed/${id}`}\r\n          title=\"YouTube video player\"\r\n          frameBorder=\"0\"\r\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n          allowFullScreen\r\n        ></iframe>\r\n      </Upper>\r\n      {present.uploaderName && (<Lower>\r\n        <Caption>\r\n          <Uploader>{`- ${present.uploaderName}`}</Uploader>\r\n        </Caption>\r\n      </Lower>)}\r\n    </SlideInner>\r\n  );\r\n}\r\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  Link,\r\n  useParams\r\n} from \"react-router-dom\";\r\nimport { Present } from \"../../types\";\r\nimport getJson from \"../../utils/api\";\r\nimport { createAndGetUserId } from \"../../utils/userId\";\r\nimport CalendarDay, { DOOR_ANIMATION_LENGTH } from \"../CalendarDay/CalendarDay\";\r\nimport styled from \"styled-components\";\r\nimport UploadForm from \"../UploadForm/UploadForm\";\r\nimport { DispatchContext, CalendarData, StateContext } from \"../DataProvider/DataProvider\";\r\nimport { getCurrentDay } from \"../../utils/getCurrentDay\";\r\nimport Presentation from \"../Presentation/Presentation\";\r\nimport { InlineButton } from \"../PresentListItem/PresentListItem\";\r\n\r\nconst Wrapper = styled.div`\r\n  margin: 2rem auto;\r\n  max-width: calc(calc(var(--size) + var(--margin)) * 4);\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  font-family: 'Great Vibes', cursive;\r\n  font-weight: normal;\r\n  font-size: 5em;\r\n  @media screen and (max-width: 440px) {\r\n    font-size: 4em;\r\n  }\r\n  color: white; // hsl(145, 64%, 24%);\r\n  text-shadow: 2px 3px 5px rgba(50 50 50 / 0.6);\r\n  margin: 3rem 0 0;\r\n  padding: 0 0.5em;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  text-align: center;\r\n`;\r\n\r\nconst Description = styled.div`\r\n  color: white; // hsl(145, 64%, 24%);\r\n  margin: 0 auto;\r\n  padding: 1em;\r\n  max-width: 700px;\r\n  text-align: center;\r\n\r\n  ${InlineButton} {\r\n    margin-left: 0;\r\n  }\r\n\r\n  a {\r\n    color: rgb(248, 178, 41);\r\n  }\r\n`;\r\n\r\nconst Row = styled.section`\r\n  width: calc(calc(var(--size) + var(--margin)) * 2);\r\n  height: calc(calc(var(--size) + var(--margin)) * 2);\r\n  @media screen and (max-width: 440px) {\r\n    margin-left: var(--margin);\r\n  }\r\n`;\r\n\r\nexport default function CalendarPage() {\r\n  const { uuid } = useParams();\r\n  const { calendarData } = useContext(StateContext);\r\n  const dispatch = useContext(DispatchContext);\r\n  const [isUploadFormOpen, setIsUploadFormOpen] = useState(false);\r\n  const [isPresentationOpen, setIsPresentationOpen] = useState(false);\r\n  const [selectedDay, setSelectedDay] = useState<number | null>(null);\r\n  const userId = createAndGetUserId(uuid);\r\n\r\n  useEffect(() => {\r\n    if (uuid) {\r\n      getJson<CalendarData>('/calendar/' + uuid).then((presents: CalendarData) => {\r\n        dispatch({\r\n          type: 'SET_PRESENTS_DATA',\r\n          presentsData: presents\r\n        });\r\n      });\r\n    }\r\n  }, [dispatch, uuid]);\r\n\r\n  useEffect(() => {\r\n    if (uuid && userId) {\r\n      getJson<Present[]>('/calendar/' + uuid + '/' + userId).then((presents: Present[]) => {\r\n        dispatch({\r\n          type: 'SET_MYPRESENTS',\r\n          myPresents: presents\r\n        })\r\n      });\r\n    }\r\n  }, [dispatch, userId, uuid]);\r\n\r\n  useEffect(function scrollDayIntoView() {\r\n    const dayInDecember = getCurrentDay();\r\n    if (dayInDecember > -1) {\r\n      const currentDay = document.getElementById(`day_${dayInDecember}`);\r\n      if (currentDay) {\r\n        currentDay.scrollIntoView({behavior: 'smooth', block: 'center'});\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const closeUploadForm = useCallback(() => {\r\n    setIsUploadFormOpen(false);\r\n    setSelectedDay(null);\r\n  }, []);\r\n  const openUploadForm = useCallback(() => setIsUploadFormOpen(true), []);\r\n  const closePresentation = useCallback(() => {\r\n    setSelectedDay(null);\r\n    setIsPresentationOpen(false);\r\n  }, []);\r\n\r\n  const handleDayClick = useCallback((clickedDayNumber: number) => {\r\n    setSelectedDay(clickedDayNumber);\r\n    const dayInDecember = getCurrentDay();\r\n    if (dayInDecember >= clickedDayNumber && dayInDecember > -1) {\r\n      window.setTimeout(() => {\r\n        setIsPresentationOpen(true);\r\n      }, DOOR_ANIMATION_LENGTH);\r\n    } else {\r\n      window.setTimeout(() => {\r\n        openUploadForm();\r\n      }, DOOR_ANIMATION_LENGTH);\r\n    }\r\n\r\n  }, [openUploadForm]);\r\n\r\n  useEffect(() => {\r\n    if (selectedDay !== null) {\r\n      document.body.classList.add('noscroll');\r\n    }\r\n    return () => {\r\n      document.body.classList.remove('noscroll');\r\n    }\r\n  }, [selectedDay])\r\n\r\n  if (!calendarData) {\r\n    return <></>;\r\n  }\r\n\r\n  const isUnka = uuid === 'a3f731b4-7047-42ef-a1ff-a57192ff186a';\r\n\r\n  return (\r\n    <div>\r\n      {calendarData?.calendarName && <Title>{calendarData?.calendarName}</Title>}\r\n      <Description>\r\n        {calendarData?.description &&\r\n          <>\r\n            <p>{calendarData.description}</p>\r\n            <br />\r\n          </>\r\n        }\r\n\r\n        {isUnka ?\r\n          <>\r\n          <p>Welcome to our shared online Advent calendar! <InlineButton onClick={openUploadForm}>Upload</InlineButton> a surprise or two to share, and check back every day for a new surprise!</p>\r\n          <p>If you want to create another calendar for another group, <Link to=\"/\">click here</Link>! (🇭🇺 only)<br /> Upload a picture, short text, or a Youtube link for the chosen day! On that day everyone who checks this calendar will see your upload.</p>\r\n          </>\r\n        :\r\n          <>\r\n            <p>Itt a közös online adventi naptáratok! Küldd tovább az oldal urljét azoknak, akikkel együtt szeretnéd várni a karácsonyt, majd <InlineButton onClick={openUploadForm}>tölts föl</InlineButton> meglepetéseket!</p>\r\n            <p>December minden napján látni fogjátok, ki mit töltött föl aznapra! Úgyhogy hajrá, tölts föl sok ajándékot, és ha szeretnél egy másik társasággal külön naptárat, <Link to=\"/\">kattints ide</Link>!</p>\r\n          </>\r\n        }\r\n\r\n      </Description>\r\n      <Wrapper>\r\n        <Row>\r\n          <CalendarDay isSelected={selectedDay === 12} color=\"red\" dayNumber={12} icon=\"R\" onClick={handleDayClick} />\r\n          <CalendarDay isSelected={selectedDay === 7} color=\"green\" dayNumber={7} icon=\"a\" onClick={handleDayClick} />\r\n          <CalendarDay isSelected={selectedDay === 21} color=\"yellow\" dayNumber={21} icon=\"m\" onClick={handleDayClick} />\r\n          <CalendarDay isSelected={selectedDay === 18} color=\"blue\" dayNumber={18} icon=\"i\" onClick={handleDayClick} />\r\n        </Row>\r\n        <Row>\r\n          <CalendarDay isSelected={selectedDay === 14} color=\"darkred\" dayNumber={14} dimensions=\"tall\" icon=\"g\" onClick={handleDayClick} />\r\n          <CalendarDay isSelected={selectedDay === 2} color=\"yellow\" dayNumber={2} icon=\"x\" onClick={handleDayClick} />\r\n          <CalendarDay isSelected={selectedDay === 9} color=\"blue\" dayNumber={9} icon=\"j\" onClick={handleDayClick} />\r\n        </Row>\r\n        <Row>\r\n          <CalendarDay isSelected={selectedDay === 1} color=\"purple\" dayNumber={1} dimensions=\"wide\" icon=\"A\" onClick={handleDayClick} />\r\n          <CalendarDay isSelected={selectedDay === 17} color=\"beige\" dayNumber={17} icon=\"l\" onClick={handleDayClick} />\r\n          <CalendarDay isSelected={selectedDay === 6} color=\"darkblue\" dayNumber={6} icon=\"p\" onClick={handleDayClick} />\r\n        </Row>\r\n        <Row>\r\n          <CalendarDay isSelected={selectedDay === 23} color=\"darkgreen\" dayNumber={23} dimensions=\"large\" icon=\"v\" onClick={handleDayClick} />\r\n        </Row>\r\n        <Row>\r\n          <CalendarDay isSelected={selectedDay === 8} color=\"blue\" dayNumber={8} icon=\"y\" onClick={handleDayClick} />\r\n          <CalendarDay isSelected={selectedDay === 16} color=\"darkred\" dayNumber={16} icon=\"f\" onClick={handleDayClick} />\r\n          <CalendarDay isSelected={selectedDay === 20} color=\"green\" dayNumber={20} dimensions=\"wide\" icon=\"O\" onClick={handleDayClick} />\r\n        </Row>\r\n        <Row>\r\n          <CalendarDay isSelected={selectedDay === 10} color=\"yellow\" dayNumber={10} icon=\"C\" onClick={handleDayClick} />\r\n          <CalendarDay isSelected={selectedDay === 4} color=\"purple\" dayNumber={4} icon=\"V\" onClick={handleDayClick} />\r\n          <CalendarDay isSelected={selectedDay === 0} color=\"blue\" dayNumber={0} icon=\"b\" onClick={handleDayClick} />\r\n          <CalendarDay isSelected={selectedDay === 13} color=\"red\" dayNumber={13}  icon=\"H\" onClick={handleDayClick} />\r\n        </Row>\r\n        <Row>\r\n          <CalendarDay isSelected={selectedDay === 5} color=\"red\" dayNumber={5} dimensions=\"tall\" icon=\"s\" onClick={handleDayClick} />\r\n          <CalendarDay isSelected={selectedDay === 15} color=\"darkblue\" dayNumber={15} icon=\"E\" onClick={handleDayClick} />\r\n          <CalendarDay isSelected={selectedDay === 19} color=\"yellow\" dayNumber={19} icon=\"F\" onClick={handleDayClick} />\r\n        </Row>\r\n        <Row>\r\n          <CalendarDay isSelected={selectedDay === 22} color=\"beige\" dayNumber={22} dimensions=\"wide\" icon=\"X\" onClick={handleDayClick} />\r\n          <CalendarDay isSelected={selectedDay === 11} color=\"darkred\" dayNumber={11} icon=\"c\" onClick={handleDayClick} />\r\n          <CalendarDay isSelected={selectedDay === 3} color=\"green\" dayNumber={3}  icon=\"T\" onClick={handleDayClick} />\r\n        </Row>\r\n      </Wrapper>\r\n\r\n      {isUploadFormOpen && (\r\n        <UploadForm\r\n          calendarId={uuid}\r\n          defaultSelectedDay={selectedDay}\r\n          onClose={closeUploadForm}\r\n        />\r\n      )}\r\n      {isPresentationOpen && (\r\n        <Presentation\r\n          dayNumber={selectedDay}\r\n          onClose={closePresentation}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","import styled from 'styled-components';\r\n\r\nexport const HangingItem = styled.div<{ inForeground?: boolean; }>`\r\n  // start hanging items a bit above the viewport\r\n  position: absolute;\r\n  top: -50px;\r\n  left: 0;\r\n\r\n  z-index: ${props => props.inForeground ? 1 : -1};\r\n\r\n  // hanging animation\r\n  @keyframes hanging {\r\n    0%   { transform: rotate(5deg) translateZ(0px); }\r\n    100% { transform: rotate(-5deg) translateZ(0px); }\r\n  }\r\n  animation: ${props => props.inForeground ? '2s' : '1.5s'} ease-in-out infinite alternate hanging;\r\n\r\n  // this makes it \"hang\" from center - top (rotation center is at x: 50%, y: -100%)\r\n  transform-origin: 50% -100%;\r\n\r\n  // image within the hanging container\r\n  & svg {\r\n    height: 100%;\r\n    width: 15vw;\r\n    @media screen and (max-width: 440px) {\r\n      width: 20vw;\r\n    }\r\n    filter: ${props => props.inForeground ? 'drop-shadow(15px 10px 13px hsl(145deg 61% 16%))' : 'drop-shadow(5px 4px 4px hsl(145deg 61% 21%))'};\r\n  }\r\n\r\n  // this svg does not have a rope, so one is added via :after\r\n  &.withRope {\r\n    svg {\r\n      margin-top: 190px;\r\n    }\r\n    :after {\r\n      position: absolute;\r\n      left: 50%; // align center\r\n      top: 0; // start at top of svg\r\n      display: block;\r\n      content: '';\r\n      width: 2px;\r\n      height: 190px; // same as margin above svg\r\n      background-color: #9b9b9b;\r\n    }\r\n\r\n    @media screen and (max-width: 440px) {\r\n      svg {\r\n        margin-top: 100px;\r\n      }\r\n      :after {\r\n        height: 100px;\r\n      }\r\n    }\r\n  }\r\n`;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"style\", null, \"\\r\\n    .st0{fill:#f9f7f7;stroke:#f7e7e7;stroke-width:2.0618}.st1{fill:#9f0d1e}.st2{fill:#80151b}.st3{fill:url(#SVGID_1_)}\\r\\n  \");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"line\", {\n  x1: 82,\n  x2: 82,\n  y2: 229.6,\n  className: \"st0\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M82,209.1c11.5,0,47,74.9,47,81.4c0,6.5-94,7.3-94,0C35,283.2,70.5,209.1,82,209.1L82,209.1z\",\n  className: \"st1\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M82,260.5c14.2,0,58.2,92.9,58.2,101c0,8-116.3,9-116.3,0C23.8,352.5,67.8,260.5,82,260.5L82,260.5z\",\n  className: \"st1\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M82,300.8c20,0,82,130.8,82,142.1c0,11.3-163.9,12.7-163.9,0S61.9,300.8,82,300.8L82,300.8z\",\n  className: \"st2\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"linearGradient\", {\n  id: \"SVGID_1_\",\n  x1: -12.8073,\n  x2: 125.8127,\n  y1: 252.0197,\n  y2: 520.3797,\n  gradientTransform: \"matrix(1 0 0 1 0.1401 -42.8096)\",\n  gradientUnits: \"userSpaceOnUse\"\n}, /*#__PURE__*/React.createElement(\"stop\", {\n  offset: 0.3583,\n  stopColor: \"#eeeeef\"\n}), /*#__PURE__*/React.createElement(\"stop\", {\n  offset: 0.9755,\n  stopColor: \"#c0c1c3\"\n}));\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M129.2,360.1c6.7-1,10.9-2.3,10.9-3.8c0-4.8-15.6-39.6-31.2-67.1c11.7-0.9,20-2.3,20-4.2 c0-6.5-35.5-81.4-47-81.4c-11.5,0-47,74.1-47,81.4c0,2.1,8.2,3.6,19.7,4.4c-15.5,27.2-30.9,61.6-30.9,66.9c0,1.7,4,3,10.5,4 C16,394.7,0,431.3,0,437.7c0,12.7,163.9,11.3,163.9,0C164,431.9,147.8,394.9,129.2,360.1L129.2,360.1z\",\n  className: \"st3\"\n});\n\nfunction SvgHangingChristmasTreeClipart(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlSpace: \"preserve\",\n    id: \"tree\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 163.9 451.9\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgHangingChristmasTreeClipart);\nexport default __webpack_public_path__ + \"static/media/hanging-christmas-tree-clipart.3a417b12.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"matrix(4 0 0 4 -.000016127 0)\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  width: 10,\n  height: 10,\n  x: 62.328,\n  y: 42.289,\n  fill: \"#ccc\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#666\",\n  d: \"m77.328 0-21 21v4l12 12h5v-5l-9-9 15-15 15 15-9 9v5h5l12-12v-4l-21-21h-4zm-16 41v14h36v-14h-36zm4 2h3v9h-3v-9z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#f78a24\",\n  d: \"m135.47 193.98a79.357 79.357 0 0 1 -112.23 0 79.357 79.357 0 0 1 -0.000002 -112.23 79.357 79.357 0 0 1 112.23 0.000012 79.357 79.357 0 0 1 0.00001 112.23z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#d53416\",\n  d: \"m14.217 109.21-12.526 12.53a79.357 79.357 0 0 0 -1.6387 14.271l14.164-14.164 12.633 12.631 6.3164 6.3164 18.947-18.947 18.947 18.947 18.949-18.947 12.631 12.631 6.3164 6.3164 18.947-18.947 18.949 18.947 11.348-11.348a79.357 79.357 0 0 0 -1.9258 -10.707l-9.4219 9.4219-18.949-18.947-6.3145 6.3164-12.633 12.631-18.947-18.947-18.949 18.947-18.947-18.947-6.3164 6.3164-12.631 12.631-18.949-18.947zm0 26.072-13.379 13.379a79.357 79.357 0 0 0 2.125 10.508l11.254-11.254 12.633 12.631 6.3164 6.3164 18.947-18.947 18.947 18.947 18.949-18.947 12.631 12.631 6.3164 6.3164 18.947-18.947 18.949 18.947 9.2754-9.2754a79.357 79.357 0 0 0 2.3438 -14.977l-11.619 11.619-18.949-18.947-6.3145 6.3164-12.633 12.631-18.947-18.947-18.949 18.947-18.947-18.947-6.3164 6.3164-12.631 12.631-18.949-18.947z\"\n}));\n\nfunction SvgSimpleChristmasBulbClipart(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 634.86,\n    height: 868.9,\n    viewBox: \"0 0 634.85694 868.898\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSimpleChristmasBulbClipart);\nexport default __webpack_public_path__ + \"static/media/simple-christmas-bulb-clipart.3a7db4e0.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useCallback, useState } from 'react';\r\nimport { post } from '../../utils/api';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Calendar } from '../../types';\r\nimport styled, { createGlobalStyle } from 'styled-components';\r\n\r\nimport { HangingItem } from './HangingItem';\r\nimport { ReactComponent as ChristmasTree } from './hanging-christmas-tree-clipart.svg';\r\nimport { ReactComponent as ChristmasOrnament } from './simple-christmas-bulb-clipart.svg';\r\nimport { Button } from '../UploadForm/Button';\r\n\r\nconst BodyBackgroundOverride = createGlobalStyle`\r\n  body {\r\n    background-color: hsl(145deg 61% 29%);\r\n  }\r\n`;\r\n\r\nconst Page = styled.div`\r\n  margin: 0 auto;\r\n  width: 80%;\r\n`;\r\n\r\nconst Error = styled.p`\r\n  color: rgb(248, 178, 41);\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  font-family: Christmas;\r\n  font-size: 20vw;\r\n  font-weight: 200;\r\n  width: 100%;\r\n  text-align: center;\r\n  margin-top: 20vh;\r\n  margin-bottom: 4rem;\r\n  text-shadow: 2px 2px 4px hsl(145deg 61% 21%);\r\n  color: #c8cbb9;\r\n`;\r\n\r\nconst TextContainer = styled.div`\r\n  width: 60%;\r\n  @media screen and (max-width: 440px) {\r\n    width: 80%;\r\n  }\r\n  margin: 0 auto 5em;\r\n`;\r\n\r\nconst Text = styled.p`\r\n  color: #c8cbb9;\r\n  font-size: 1.5em;\r\n  line-height: 1.65em;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  outline: none;\r\n  border-radius: 5px;\r\n  border: none;\r\n  padding: 0.5em;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  font-size: 2em;\r\n  font-family: inherit;\r\n  text-shadow: 1px 1px 2px rgba(50 50 50 / 0.5);\r\n  background-color: #dfe2d2;\r\n  color: hsl(145, 64%, 24%);\r\n  margin: 0.5em 0 0.5em;\r\n\r\n  &::placeholder {\r\n    color: rgba(10 10 10 / 0.5);\r\n    text-align: center;\r\n  }\r\n\r\n  &:active, &:focus {\r\n    &::placeholder {\r\n      color: transparent;\r\n      text-shadow: none;\r\n    }\r\n  }\r\n`;\r\n\r\nexport default function LandingPage() {\r\n  const navigate = useNavigate();\r\n  const [name, setName] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [showTitleForm, setShowTitleForm] = useState(false);\r\n\r\n  const createCalendar = useCallback(() => {\r\n    if (name.length < 3 || name.length > 100) {\r\n      return setError('Kérlek 3 és 100 karakter közötti nevet adj meg!');\r\n    }\r\n    post<Calendar>('/create', { name }).then((calendar: Calendar) => {\r\n     navigate(`/${calendar.uuid}`);\r\n    })\r\n  }, [name, navigate]);\r\n\r\n  const enableUploadForm = useCallback(() => {\r\n    setShowTitleForm(showTitleForm => !showTitleForm);\r\n  }, []);\r\n\r\n  const handleNameChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setError('');\r\n    setName(event.target.value)\r\n  }, []);\r\n\r\n  return (\r\n    <Page>\r\n      <BodyBackgroundOverride />\r\n\r\n      <Title>( Boldog )<br />( Karácsonyt! )</Title>\r\n\r\n      <HangingItem style={{ left: '70%', animationDelay: '0.3s' }} className=\"withRope\">\r\n        <ChristmasOrnament />\r\n      </HangingItem>\r\n\r\n      <HangingItem inForeground={true} style={{ left: '10%' }}>\r\n        <ChristmasTree />\r\n      </HangingItem>\r\n\r\n      <TextContainer>\r\n\r\n        {!showTitleForm && (\r\n          <>\r\n            <Text>Készíts te is saját naptárat! Hívd meg a barátaid, töltsetek fel egymásnak meglepetéseket, és várjátok együtt a karácsonyt!</Text>\r\n            <Button onClick={enableUploadForm}>Szeretnék egy saját naptárat!</Button>\r\n          </>\r\n        )}\r\n        {showTitleForm && (\r\n          <>\r\n            <Text>Add meg a naptárad címét, és a gombnyomás után máris kezdheted a feltöltést!<br />A naptárad publikus, de titkos URL mögött van. Ha valakivel közösen szeretnétek meglepni egymást, csak küldd el neki az URL-t, és ő is része lesz az ajándékozásnak!</Text>\r\n\r\n            <Input type=\"text\" value={name} placeholder=\"naptárad címe\" onChange={handleNameChange} /><br />\r\n            <Button onClick={createCalendar}>Mutasd a naptáram!</Button>\r\n          </>\r\n        )}\r\n\r\n        {error && (\r\n          <Error>\r\n            {error}\r\n          </Error>\r\n        )}\r\n      </TextContainer>\r\n    </Page>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { Routes, Route } from \"react-router-dom\";\r\nimport CalendarPage from './components/CalendarPage/CalendarPage';\r\nimport StateWrapper from './components/DataProvider/DataProvider';\r\nimport LandingPage from './components/Home/Home';\r\n\r\nfunction App() {\r\n  return (\r\n    <StateWrapper>\r\n      <Routes>\r\n        <Route path=\"/\" element={<LandingPage />} />\r\n        <Route path=\"/:uuid\" element={<CalendarPage />} />\r\n      </Routes>\r\n    </StateWrapper>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { HashRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <HashRouter>\r\n      <App />\r\n    </HashRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}